{"version":3,"sources":["App.js","index.js"],"names":["App","state","activePage","inputError","isFetching","isLoading","numPages","recentSearches","resultsReturned","safeSearch","searchResults","searchTerm","getSearchHistory","axios","get","then","res","data","length","_this","setState","reverse","catch","err","console","log","handleChange","e","_ref","_this$setState","name","value","Object","defineProperty","handleSubmit","lastSearch","pages","paginate","_ref2","searchRecent","target","toggle","this","_this2","react_default","a","createElement","style","minHeight","minWidth","padding","Container","Header","as","color","textAlign","fontFamily","fontSize","Segment","vertical","Form","onSubmit","Field","width","Input","fluid","error","onChange","placeholder","Group","inline","Button","onClick","Checkbox","checked","label","Message","size","List","horizontal","slice","map","search","i","search_term","Item","key","Pagination","firstPage","lastPage","onPageChange","totalPages","Loader","active","Fragment","Image","result","alt","bordered","href","url","rel","src","thumbnail","wrapped","firstItem","lastItem","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.44da5e0f.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Checkbox, Container, Form, Header, Image, List, Loader, Message, Pagination, Segment } from \"semantic-ui-react\";\nimport axios from \"axios\";\n\nclass App extends Component {\n  state = {\n    activePage: 1,\n    inputError: false,\n    isFetching: false,\n    isLoading: true,\n    numPages: \"\",\n    recentSearches: [],\n    resultsReturned: false,\n    safeSearch: false,\n    searchResults: [],\n    searchTerm: \"\"\n  };\n\n  componentWillMount() {\n    this.getSearchHistory();\n  }\n\n  getSearchHistory = () => {\n    axios\n      .get(\"/api/history\")\n      .then(res => {\n        if (res.data.length < 1) {\n          this.getSearchHistory();\n        } else {\n          return this.setState({\n            recentSearches: res.data.reverse(),\n            isLoading: false\n          });\n        }\n      })\n      .catch(err => console.log(err));\n  };\n\n  // Search input handler\n  handleChange = (e, { name, value }) => {\n    this.setState({ [name]: value, inputError: false });\n  };\n\n  // Search for new term or next page of results\n  handleSubmit = () => {\n    if (this.state.searchTerm === '') {\n      this.setState({inputError: true})\n      return;\n    }\n    // Set active page to 1 if new search term is entered\n    if (this.state.searchTerm !== this.state.lastSearch) {\n      this.setState({ activePage: 1 });\n    }\n\n    // Set component state for fresh search results\n    this.setState({ isFetching: true, searchResults: [] });\n\n    let safeSearch = this.state.safeSearch ? \"moderate\" : \"off\";\n    // query the search API\n    axios\n      .get(\n        \"/api/search/\" +\n        this.state.searchTerm +\n        \"?offset=\" +\n        this.state.activePage +\n        \"&safeSearch=\" +\n        safeSearch\n      )\n      .then(res =>\n        this.setState({\n          isFetching: false,\n          searchResults: res.data.searchResults,\n          numPages: res.data.pages,\n          lastSearch: this.state.searchTerm,\n          resultsReturned: true\n        })\n      )\n      .catch(err => console.log(err));\n  };\n\n  // Paginate search results\n  paginate = (e, { activePage }) => {\n    this.setState({ activePage }, () => this.handleSubmit());\n  };\n\n  searchRecent = e => {\n    this.setState({ searchTerm: e.target.name }, () => this.handleSubmit());\n  };\n\n  toggle = () => {\n    this.setState({\n      safeSearch: !this.state.safeSearch\n    });\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          minHeight: \"100vh\",\n          minWidth: \"100vw\",\n          padding: \"2rem\"\n        }}\n      >\n        <Container>\n          <Header\n            as={\"h1\"}\n            color={\"orange\"}\n            textAlign={\"center\"}\n            style={{ fontFamily: \"Righteous, cursive\", fontSize: \"5rem\" }}\n          >\n            CZ PicSearch\n          </Header>\n          <Segment vertical>\n            <Form onSubmit={this.handleSubmit}>\n              <Form.Field width={16}>\n                <Form.Input\n                  fluid\n                  name=\"searchTerm\"\n                  error={this.state.inputError}\n                  onChange={this.handleChange}\n                  placeholder={\"Search for an image...\"}\n                  width={16}\n                  value={this.state.searchTerm}\n                />\n              </Form.Field>\n              <Form.Group inline width={16}>\n                <Form.Button fluid color={\"orange\"} onClick={this.handleSubmit}>\n                  Search\n                </Form.Button>\n                <Checkbox\n                  checked={this.state.safeSearch}\n                  label={\"Use SafeSearch\"}\n                  onChange={this.toggle}\n                />\n              </Form.Group>\n            </Form>\n                {this.state.inputError && <Message error>Please enter a search term</Message>}\n          </Segment>\n          {this.state.recentSearches.length > 0 && (\n            <Segment vertical>\n              <Header size={\"mini\"}>Last 10 Searches</Header>\n              <List horizontal>\n                {this.state.recentSearches.slice(0, 10).map((search, i) => {\n                  const search_term = search.search_term;\n                  return (\n                    <List.Item\n                      as={\"a\"}\n                      key={i}\n                      name={search_term}\n                      onClick={this.searchRecent}\n                      style={{ color: \"#f2711c\" }}\n                    >\n                      {search.search_term}\n                    </List.Item>\n                  );\n                })}\n              </List>\n            </Segment>\n          )}\n        </Container>\n        <Container>\n          {this.state.resultsReturned && (\n            <Segment vertical>\n              <Pagination\n                activePage={this.state.activePage}\n                firstPage={null}\n                lastPage={null}\n                onPageChange={this.paginate}\n                totalPages={this.state.numPages}\n              />\n            </Segment>\n          )}\n\n          <Loader active={this.state.isFetching} />\n          <Segment vertical>\n            {this.state.searchResults.length > 0 && (\n              <React.Fragment>\n                <Image.Group size=\"small\">\n                  {this.state.searchResults.map(result => (\n                    <Image\n                      alt={result.alt}\n                      as=\"a\"\n                      bordered\n                      href={result.url}\n                      key={result.url}\n                      rel=\"noopener noreferrer\"\n                      src={result.thumbnail}\n                      target={\"blank\"}\n                      wrapped\n                    />\n                  ))}\n                </Image.Group>\n              </React.Fragment>\n            )}\n          </Segment>\n          {this.state.resultsReturned && (\n            <Segment vertical>\n              <Pagination\n                activePage={this.state.activePage}\n                firstItem={null}\n                lastItem={null}\n                onPageChange={this.paginate}\n                totalPages={this.state.numPages}\n              />\n            </Segment>\n          )}\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}