(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{183:function(e,t,a){e.exports=a(338)},338:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(37),c=a.n(s),i=(a(188),a(99)),l=a(149),h=a(150),o=a(170),u=a(151),m=a(171),g=a(347),f=a(355),d=a(354),S=a(350),v=a(348),E=a(353),p=a(352),P=a(351),b=a(349),y=a(169),R=a(100),w=a.n(R),k=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={activePage:1,inputError:!1,isFetching:!1,isLoading:!0,numPages:"",recentSearches:[],resultsReturned:!1,safeSearch:!1,searchResults:[],searchTerm:""},a.getSearchHistory=function(){w.a.get("/api/history").then(function(e){if(!(e.data.length<1))return a.setState({recentSearches:e.data.reverse(),isLoading:!1});a.getSearchHistory()}).catch(function(e){return console.log(e)})},a.handleChange=function(e,t){var r,n=t.name,s=t.value;a.setState((r={},Object(i.a)(r,n,s),Object(i.a)(r,"inputError",!1),r))},a.handleSubmit=function(){if(""!==a.state.searchTerm){a.state.searchTerm!==a.state.lastSearch&&a.setState({activePage:1}),a.setState({isFetching:!0,searchResults:[]});var e=a.state.safeSearch?"moderate":"off";w.a.get("/api/search/"+a.state.searchTerm+"?offset="+a.state.activePage+"&safeSearch="+e).then(function(e){return a.setState({isFetching:!1,searchResults:e.data.searchResults,numPages:e.data.pages,lastSearch:a.state.searchTerm,resultsReturned:!0})}).catch(function(e){return console.log(e)})}else a.setState({inputError:!0})},a.paginate=function(e,t){var r=t.activePage;a.setState({activePage:r},function(){return a.handleSubmit()})},a.searchRecent=function(e){a.setState({searchTerm:e.target.name},function(){return a.handleSubmit()})},a.toggle=function(){a.setState({safeSearch:!a.state.safeSearch})},a}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){this.getSearchHistory()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{style:{minHeight:"100vh",minWidth:"100vw",padding:"2rem"}},n.a.createElement(g.a,null,n.a.createElement(f.a,{as:"h1",color:"orange",textAlign:"center",style:{fontFamily:"Righteous, cursive",fontSize:"5rem"}},"CZ PicSearch"),n.a.createElement(d.a,{vertical:!0},n.a.createElement(S.a,{onSubmit:this.handleSubmit},n.a.createElement(S.a.Field,{width:16},n.a.createElement(S.a.Input,{fluid:!0,name:"searchTerm",error:this.state.inputError,onChange:this.handleChange,placeholder:"Search for an image...",width:16,value:this.state.searchTerm})),n.a.createElement(S.a.Group,{inline:!0,width:16},n.a.createElement(S.a.Button,{fluid:!0,color:"orange",onClick:this.handleSubmit},"Search"),n.a.createElement(v.a,{checked:this.state.safeSearch,label:"Use SafeSearch",onChange:this.toggle}))),this.state.inputError&&n.a.createElement(E.a,{error:!0},"Please enter a search term")),this.state.recentSearches.length>0&&n.a.createElement(d.a,{vertical:!0},n.a.createElement(f.a,{size:"mini"},"Last 10 Searches"),n.a.createElement(p.a,{horizontal:!0},this.state.recentSearches.slice(0,10).map(function(t,a){var r=t.search_term;return n.a.createElement(p.a.Item,{as:"a",key:a,name:r,onClick:e.searchRecent,style:{color:"#f2711c"}},t.search_term)})))),n.a.createElement(g.a,null,this.state.resultsReturned&&n.a.createElement(d.a,{vertical:!0},n.a.createElement(P.a,{activePage:this.state.activePage,firstPage:null,lastPage:null,onPageChange:this.paginate,totalPages:this.state.numPages})),n.a.createElement(b.a,{active:this.state.isFetching}),n.a.createElement(d.a,{vertical:!0},this.state.searchResults.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a.Group,{size:"small"},this.state.searchResults.map(function(e){return n.a.createElement(y.a,{alt:e.alt,as:"a",bordered:!0,href:e.url,key:e.url,rel:"noopener noreferrer",src:e.thumbnail,target:"blank",wrapped:!0})})))),this.state.resultsReturned&&n.a.createElement(d.a,{vertical:!0},n.a.createElement(P.a,{activePage:this.state.activePage,firstItem:null,lastItem:null,onPageChange:this.paginate,totalPages:this.state.numPages}))))}}]),t}(r.Component);c.a.render(n.a.createElement(k,null),document.getElementById("root"))}},[[183,1,2]]]);
//# sourceMappingURL=main.44da5e0f.chunk.js.map